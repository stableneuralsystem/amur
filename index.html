<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMUR - Игра для влюбленных</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff004c;
            --dark-red: #4a0010;
            --bg-gradient: linear-gradient(135deg, #1a0505 0%, #3d0014 50%, #1a0505 100%);
            --neon-shadow: 0 0 10px rgba(255, 0, 76, 0.8), 0 0 20px rgba(255, 0, 76, 0.4);
            --gold: #ffd700;
            --gold-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            --glass: rgba(20, 0, 5, 0.85);
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Oswald', sans-serif;
            background: var(--bg-gradient);
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Анимация парящих сердец на фоне */
        .bg-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart-bg {
            position: absolute;
            color: rgba(255, 0, 76, 0.1);
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
            20% { opacity: 0.5; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0; }
        }

        /* Контейнер приложения */
        #app {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 500px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .screen {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
            text-align: center;
            animation: fadeIn 0.8s ease;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        h1, h2 {
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
            text-shadow: var(--neon-shadow);
        }

        h1 { font-size: 3rem; color: var(--primary); }
        h2 { font-size: 1.8rem; color: #fff; }

        /* Элементы форм */
        input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary);
            padding: 15px;
            color: white;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            text-align: center;
            border-radius: 30px;
            outline: none;
            width: 80%;
            margin-bottom: 20px;
            transition: 0.3s;
        }

        input:focus {
            box-shadow: var(--neon-shadow);
            background: rgba(255, 0, 76, 0.1);
        }

        input.error {
            animation: shake 0.3s;
            border-color: red;
            box-shadow: 0 0 15px red;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        button {
            background: linear-gradient(45deg, var(--dark-red), var(--primary));
            border: none;
            padding: 15px 40px;
            color: white;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            text-transform: uppercase;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: var(--neon-shadow);
            transition: 0.3s;
            margin: 10px;
        }

        button:active {
            transform: scale(0.95);
        }

        /* Экран выбора количества */
        .count-grid {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .heart-btn {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary);
            border-radius: 50%; /* Сделаем круглыми для простоты, но с иконкой */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
        }
        
        .heart-btn.selected {
            background: var(--primary);
            box-shadow: var(--neon-shadow);
            transform: scale(1.1);
        }

        /* Настройка игроков */
        .player-setup-row {
            background: var(--glass);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            width: 100%;
            border: 1px solid rgba(255,0,76,0.3);
        }

        .gender-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 5px;
        }

        .gender-btn {
            padding: 5px 15px;
            font-size: 0.9rem;
            opacity: 0.5;
            background: transparent;
            box-shadow: none;
            border: 1px solid white;
        }

        .gender-btn.active {
            opacity: 1;
            background: var(--primary);
            border-color: var(--primary);
            box-shadow: var(--neon-shadow);
        }

        /* ИГРОВОЙ ЭКРАН */
        .game-board {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 20px auto;
            border-radius: 50%;
            border: 2px dashed rgba(255,255,255,0.1);
        }

        .player-node {
            position: absolute;
            width: 80px;
            text-align: center;
            transform: translate(-50%, -50%);
            transition: 0.3s;
        }

        .bulb {
            width: 15px;
            height: 15px;
            background: #333;
            border-radius: 50%;
            margin: 0 auto 5px;
            border: 1px solid #555;
            transition: 0.1s;
        }

        .bulb.lit {
            background: var(--gold);
            box-shadow: var(--gold-shadow);
            border-color: #fff;
        }

        .player-name { font-size: 1rem; color: #ccc; }
        .player-score { font-size: 1.2rem; font-weight: bold; color: var(--primary); }

        .spin-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            font-size: 1.2rem;
            line-height: 1.1;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 76, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(255, 0, 76, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 76, 0); }
        }

        /* Карточка задания */
        .task-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 90%;
            max-width: 400px;
            background: rgba(20, 0, 10, 0.95);
            border: 2px solid var(--gold);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .task-card.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .task-text {
            font-size: 1.4rem;
            margin: 20px 0;
            line-height: 1.4;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 90;
            display: none;
        }

        /* Победа */
        .winner-name {
            font-size: 4rem;
            color: var(--gold);
            text-shadow: var(--gold-shadow);
            animation: bounce 1s infinite alternate;
        }
        
        @keyframes bounce {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--gold);
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

    </style>
</head>
<body>

    <div class="bg-hearts" id="bgHearts"></div>

    <div id="app">
        <div class="screen active" id="screen-login">
            <h1>AMUR</h1>
            <p>Введите секретный код</p>
            <input type="password" id="passwordInput" placeholder="****" maxlength="4">
            <button onclick="checkPassword()">Войти</button>
        </div>

        <div class="screen" id="screen-count">
            <h2>Сколько нас?</h2>
            <div class="count-grid">
                <div class="heart-btn" onclick="selectCount(2)">2</div>
                <div class="heart-btn" onclick="selectCount(3)">3</div>
                <div class="heart-btn" onclick="selectCount(4)">4</div>
            </div>
            <button onclick="goToNames()">Далее</button>
        </div>

        <div class="screen" id="screen-names">
            <h2>Кто играет?</h2>
            <div id="namesContainer"></div>
            <button onclick="goToScore()">Продолжить</button>
        </div>

        <div class="screen" id="screen-score">
            <h2>До скольки играем?</h2>
            <div class="count-grid">
                <div class="heart-btn" onclick="setScoreLimit(10)">10</div>
                <div class="heart-btn selected" id="defaultScore" onclick="setScoreLimit(15)">15</div>
                <div class="heart-btn" onclick="setScoreLimit(20)">20</div>
            </div>
            <input type="number" id="customScore" placeholder="Свой вариант">
            <button onclick="startGame()">Начать игру</button>
        </div>

        <div class="screen" id="screen-game">
            <div class="game-board" id="gameBoard">
                <button class="spin-btn" onclick="spinWheel()">КРУТИТЬ<br>БАРАБАН</button>
            </div>
        </div>

        <div class="screen" id="screen-win">
            <h1>ПОБЕДИТЕЛЬ</h1>
            <div class="winner-name" id="winnerName">Имя</div>
            <p style="margin-top: 20px;">❤️</p>
            <button onclick="resetGame()">Новая игра</button>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="task-card" id="taskCard">
        <h2 id="taskTarget" style="color: var(--gold)">Для кого?</h2>
        <p class="task-text" id="taskContent">Текст задания...</p>
        <button onclick="completeTask(true)">Выполнено (+1)</button>
        <button onclick="completeTask(false)" style="background: transparent; border: 1px solid #555;">Пропустить (-1)</button>
    </div>

    <audio id="audioWin" src="https://assets.mixkit.co/sfx/preview/mixkit-ethereal-fairy-win-sound-2019.mp3"></audio>

<script>
    // --- ДАННЫЕ ИГРЫ ---
    let gameState = {
        players: [], // {name, gender, score, id}
        scoreLimit: 15,
        playerCount: 2,
        isSpinning: false,
        currentTaskPlayers: []
    };

    // БАЗА ЗАДАНИЙ (Романтика, легкий флирт)
    const TASKS = {
        solo: [
           "Выбери игрока противоположного пола, поставь раком и трахай его/её двумя пальцами в попу/киску жёстко и быстро 80 секунд.",
        "Выбери любого противоположного, ляг в миссионерскую позу сверху и еби пальцами глубоко и медленно 90 секунд.",
        "Выбери и сделай facefuck пальцами в рот, держа за волосы, жёстко и глубоко 70 секунд.",
        "Выбери, посади на себя в позу наездницы и трахай снизу пальцами быстро 80 секунд.",
        "Выбери, поставь раком у стены и еби тремя пальцами очень жёстко 75 секунд.",
        "Выбери, ляг на спину, посади сверху и трахай в позе обратной наездницы быстро 85 секунд.",
        "Выбери и трахай в позе ложки сбоку тремя пальцами медленно и глубоко 90 секунд.",
        "Выбери, поставь на колени и еби в рот пальцами как в пизду 70 секунд.",
        "Выбери, ляг на стол/диван и трахай стоя сзади жёсткими толчками 80 секунд.",
        "Выбери и сделай 69: ты сверху, трахай языком и пальцами одновременно быстро 85 секунд.",
        "Выбери, поставь раком и чередуй киску и попу двумя пальцами жёстко 75 секунд.",
        "Выбери, сядь на лицо и заставь вылизывать, пока сам трахаешь пальцами 80 секунд.",
        "Выбери и трахай стоя, подняв одну ногу, глубоко и сильно 70 секунд.",
        "Выбери, положи на спину, закинь ноги на плечи и еби жёстко 90 секунд.",
        "Выбери и сделай спитроаст пальцами: один в рот, два в киску/попу 80 секунд.",
        "Выбери, поставь в позу «собака» и трахай очень быстро до дрожи 75 секунд.",
        "Выбери и трахай в позе «мостик» снизу медленно и глубоко 85 секунд.",
        "Выбери, посади на край кровати и еби стоя жёстко 70 секунд.",
        "Выбери и сделай глубокий rimming + трахай пальцами одновременно 80 секунд.",
        "Выбери, ляг на бок и трахай ложками сзади тремя пальцами быстро 90 секунд.",
        "Выбери и facefuck пальцами, заставляя глотать слюни 70 секунд.",
        "Выбери, сядь сверху в позе наездницы и трахай себя сам на твоих пальцах 85 секунд.",
        "Выбери и трахай в позе «ласточка» (одна нога вверх) жёстко 75 секунд.",
        "Выбери, поставь раком и шлёпай по жопе во время траха пальцами 80 секунд.",
        "Выбери и еби пальцами в попу, одновременно дроча спереди 90 секунд.",
        "Выбери, ляг на спину и заставь скакать на твоей руке 80 секунд.",
        "Выбери и трахай стоя лицом к лицу, держа за горло 70 секунд.",
        "Выбери, поставь на колени и еби в рот + два пальца в попу 85 секунд.",
        "Выбери и сделай «вертолёт» пальцами: быстро круговые движения 75 секунд.",
        "Выбери, ляг сверху и трахай в миссионерской позе очень жёстко 90 секунд.",
        "Выбери и трахай в позе «ножницы» медленно и глубоко 80 секунд.",
        "Выбери, поставь раком и еби четырьмя пальцами 70 секунд.",
        "Выбери и заставь сосать твои пальцы, пока сам трахаешь в попу 85 секунд.",
        "Выбери, сядь на лицо и трахай языком, одновременно пальцами 80 секунд.",
        "Выбери и трахай в позе «обратная ложка» быстро 75 секунд.",
        "Выбери, поставь у стены и еби сзади стоя жёстко 90 секунд.",
        "Выбери и сделай двойное проникновение пальцами (киска + попа) 80 секунд.",
        "Выбери, ляг на спину и трахай, держа за бёдра 70 секунд.",
        "Выбери и facefuck рукой, заставляя глубоко заглатывать 85 секунд.",
        "Выбери, поставь в позу «краб» и трахай сверху 75 секунд.",
        "Выбери и трахай медленно, но очень глубоко с паузами 90 секунд.",
        "Выбери, посади сверху и заставь скакать жёстко 80 секунд.",
        "Выбери и еби пальцами в попу, шлёпая по жопе 70 секунд.",
        "Выбери, ляг в 69 и трахай языком + пальцами одновременно 85 секунд.",
        "Выбери и трахай стоя, подняв обе ноги 75 секунд.",
        "Выбери, поставь раком и трахай очень быстро до крика 90 секунд.",
        "Выбери и сделай «поза принцессы» (ноги на плечах) жёстко 80 секунд.",
        "Выбери, сядь сверху и трахай себя на твоей руке медленно 70 секунд.",
        "Выбери и трахай в позе «догги у стены» максимально жёстко 85 секунд."
        ],
        duo: [
            "Мужчина ложится на спину. Женщина садится сверху в позе наездницы и скачет на его члене или руке очень активно и быстро 100 секунд.",
    "Женщина становится раком на коленях. Мужчина трахает её пальцами в киску сзади жёстко и ритмично, держа за бёдра 95 секунд.",
    "Мужчина стоит у стены. Женщина опускается на колени и сосёт ему член глубоко и активно, потом мужчина трахает ей рот пальцами 90 секунд.",
    "Женщина лежит на спине, ноги широко раздвинуты. Мужчина трахает её киску тремя пальцами глубоко и быстро, держа за лодыжки 100 секунд.",
    "Мужчина сидит на стуле. Женщина садится ему на колени лицом к нему и трахается на его руке или члене ритмично и жёстко 95 секунд.",
    "Женщина ложится на живот. Мужчина ложится сверху и трахает её в попу двумя пальцами медленно и очень глубоко 90 секунд.",
    "Мужчина лежит на спине. Женщина делает facesitting (садится киской на лицо) и активно двигается бёдрами 100 секунд.",
    "Женщина стоит раком у края кровати. Мужчина стоит сзади и трахает её киску или попу пальцами жёстко и быстро 95 секунд.",
    "Мужчина стоит. Женщина на коленях перед ним сосёт член глубоко, потом мужчина держит её за голову и трахает рот пальцами 90 секунд.",
    "Женщина лежит на спине, ноги закинуты за голову. Мужчина трахает её киску и попу пальцами одновременно глубоко 100 секунд.",
    "Мужчина ложится на бок. Женщина ложится перед ним в ложках — он трахает её сзади медленно и глубоко, целуя в шею 95 секунд.",
    "Женщина сидит на столе/диване, ноги раздвинуты. Мужчина стоит между ног и трахает её киску пальцами жёстко и ритмично 90 секунд.",
    "Мужчина сидит на полу. Женщина садится сверху лицом к нему в позе наездницы и скачет на его члене или руке активно 100 секунд.",
    "Женщина становится раком. Мужчина трахает её сзади тремя пальцами быстро, одновременно шлёпая по попе ладонью 95 секунд.",
    "Мужчина лежит на спине. Женщина садится на его лицо спиной к нему и двигает бёдрами, пока трахает его член рукой 90 секунд.",
    "Женщина лежит на боку, поднимает одну ногу вверх. Мужчина трахает её стоя сбоку глубоко и ритмично 100 секунд.",
    "Мужчина стоит лицом к женщине. Она обнимает его, он засовывает руку между её ног и трахает киску пальцами быстро 95 секунд.",
    "Женщина ложится на спину. Мужчина ложится сверху в миссионерской позе и трахает её пальцами жёстко и глубоко 90 секунд.",
    "Мужчина сидит на краю кровати. Женщина садится ему на лицо (facesitting) и активно двигается, пока он лижет 100 секунд.",
    "Женщина стоит раком у стены. Мужчина прижимает её к стене сзади и трахает киску или попу пальцами очень жёстко 95 секунд.",
    "Мужчина лежит на спине, ноги подняты. Женщина лижет и трахает ему попу пальцами, пока сосёт член 90 секунд.",
    "Женщина ложится на живот, попа вверх. Мужчина ложится сверху и трахает её в попу медленно и глубоко 100 секунд.",
    "Мужчина стоит. Женщина на коленях сосёт ему член и лижет яйца активно 30 секунд, потом мужчина трахает ей рот пальцами 60 секунд.",
    "Женщина сидит на диване, ноги раздвинуты. Мужчина опускается на колени и лижет ей киску, потом трахает пальцами быстро 95 секунд.",
    "Мужчина лежит на спине. Женщина делает 69 сверху: сосёт ему член и трахает попу пальцами одновременно 90 секунд.",
    "Женщина стоит на одной ноге, вторую поднимает высоко (поза ласточка). Мужчина трахает её стоя глубоко и ритмично 100 секунд.",
    "Мужчина сидит. Женщина садится сверху спиной к нему в позе обратной наездницы и скачет на его члене или руке 95 секунд.",
    "Женщина ложится на спину, ноги за голову. Мужчина трахает её киску жёстко, держа за бёдра 90 секунд.",
    "Мужчина стоит у стены. Женщина прижимается к нему спиной и он трахает её сзади пальцами быстро и глубоко 100 секунд.",
    "Женщина на четвереньках. Мужчина трахает её киску пальцами сзади, одновременно тянет за волосы 95 секунд.",
    "Мужчина лежит. Женщина садится на его лицо и дрочит себя, пока он лижет киску 90 секунд.",
    "Женщина лежит на боку. Мужчина ложится сзади в ложках и трахает её медленно, целуя в шею и грудь 100 секунд.",
    "Мужчина сидит на стуле. Женщина садится лицом к нему и трахается на его руке, целуясь агрессивно 95 секунд.",
    "Женщина стоит раком. Мужчина трахает её попу двумя пальцами медленно и глубоко, шлёпая по попе 90 секунд.",
    "Мужчина лежит на спине. Женщина скачет на его члене в позе наездницы очень активно и быстро 100 секунд.",
    "Женщина лежит на спине. Мужчина трахает её киску стоя между ног жёстко и ритмично 95 секунд.",
    "Мужчина стоит. Женщина на коленях делает глубокий минет, потом мужчина трахает ей рот рукой 90 секунд.",
    "Женщина сидит на столе. Мужчина стоит между ног и трахает её пальцами глубоко, держа за грудь 100 секунд.",
    "Мужчина лежит. Женщина делает facesitting и активно двигает бёдрами, пока дрочит ему член 95 секунд.",
    "Женщина ложится на спину, ноги раздвинуты широко. Мужчина трахает её киску и клитор пальцами быстро 90 секунд."
        ],
        group: [
           "Один мужчина ложится в центр на спину. Все женщины по очереди садятся ему на лицо (киской к лицу) по 30–40 секунд каждая и активно двигаются бёдрами, пока другие женщины лижут/сосут его член или трахают рукой.",
    "Одна женщина становится раком в центре. Все мужчины по очереди трахают её пальцами в киску или попу сзади жёстко и быстро по 30–35 секунд каждый, остальные женщины держат её за волосы / шлёпают по попе / лижут грудь.",
    "Мужчина лежит на спине в центре. Все женщины по очереди скачут на его члене или руке в позе наездницы по 25–35 секунд каждая, пока другие женщины сидят на его лице или лижут ему грудь / яйца.",
    "Женщина лежит на спине в центре, ноги широко раздвинуты. Все мужчины по очереди трахают её киску пальцами глубоко и ритмично по 30 секунд каждый, остальные женщины лижут ей грудь, соски и клитор.",
    "Две женщины ложатся в позе 69 в центре. Все мужчины по очереди подходят сзади и трахают каждую из них пальцами в киску или попу по 25–30 секунд на каждую женщину.",
    "Мужчина стоит в центре. Все женщины по очереди опускаются на колени и сосут ему член по 25–35 секунд каждая, пока остальные женщины лижут ему попу, яйца или шлёпают по попе.",
    "Одна женщина лежит на столе/диване на спине, ноги закинуты за голову. Все мужчины по очереди трахают её киску или попу пальцами жёстко по 30 секунд каждый, остальные женщины лижут ей грудь или делают facefuck пальцами.",
    "Мужчина сидит на краю кровати/стуле. Все женщины по очереди садятся на его лицо (facesitting) по 25–35 секунд каждая и активно двигаются, пока другие женщины скачут на его члене или трахают рукой.",
    "Две женщины стоят раком рядом в центре. Все мужчины по очереди трахают каждую сзади пальцами по 20–30 секунд на каждую женщину, чередуя, пока остальные женщины шлёпают или лижут им попу.",
    "Женщина стоит раком у стены. Все мужчины по очереди трахают её сзади пальцами жёстко по 25–35 секунд каждый, остальные женщины стоят спереди и делают ей глубокий facefuck пальцами или лижут грудь.",
    "Мужчина лежит на спине в центре. Все женщины по очереди делают ему facesitting по 25–35 секунд каждая, пока другие женщины трахают его член рукой или лижут яйца / попу.",
    "Одна женщина ложится на спину в центре, ноги широко. Все мужчины по очереди трахают её киску тремя пальцами глубоко и быстро по 25–30 секунд каждый, остальные женщины лижут ей клитор и грудь.",
    "Мужчина стоит в центре. Все женщины по очереди на коленях сосут ему член и лижут яйца по 25–35 секунд каждая, пока остальные женщины стоят сзади и лижут ему попу или шлёпают.",
    "Две женщины сидят лицом друг к другу в позе ножницы в центре. Все мужчины по очереди трахают каждую пальцами в киску по 20–30 секунд на каждую, чередуя.",
    "Женщина на четвереньках в центре. Все мужчины по очереди трахают её сзади пальцами жёстко по 25–35 секунд каждый, остальные женщины держат её за волосы и трахают рот пальцами.",
    "Мужчина лежит на спине, ноги подняты. Все женщины по очереди лижут и трахают ему попу пальцами по 25–35 секунд каждая, пока другие женщины сидят на его лице или сосут член.",
    "Одна женщина лежит на спине, ноги за голову. Все мужчины по очереди трахают её киску и попу пальцами одновременно по 25–30 секунд каждый, остальные женщины лижут ей грудь и клитор.",
    "Мужчина сидит в центре. Все женщины по очереди садятся на его лицо спиной к нему по 25–35 секунд каждая и двигаются, пока другие женщины скачут на его члене в позе наездницы.",
    "Женщина стоит раком у стены в центре. Все мужчины по очереди трахают её сзади, остальные женщины стоят спереди и по очереди делают ей facefuck или лижут грудь.",
    "Мужчина лежит. Все женщины по очереди скачут на его лице и на его члене/руке по 20–30 секунд каждая, чередуя позиции.",
    "Две женщины ложатся в позе 69 в центре. Все мужчины по очереди подходят и трахают каждую сзади пальцами по 25 секунд на каждую женщину.",
    "Одна женщина на спине в центре. Все мужчины по очереди трахают её в миссионерской позе пальцами жёстко по 25–35 секунд каждый, остальные женщины сидят на её лице по очереди.",
    "Мужчина стоит. Все женщины по очереди на коленях сосут ему член по 25 секунд каждая, пока остальные лижут ему попу, яйца или шлёпают по попе.",
    "Женщина лежит на спине, ноги раздвинуты. Все мужчины по очереди трахают её киску глубоко, остальные женщины лижут ей грудь и клитор одновременно.",
    "Мужчина лежит на спине. Все женщины по очереди делают facesitting по 20–30 секунд каждая, пока другие трахают его член рукой или лижут попу.",
    "Две женщины стоят раком рядом. Все мужчины по очереди трахают каждую сзади по 20–25 секунд, чередуя, остальные женщины шлёпают или лижут им попу.",
    "Одна женщина на четвереньках. Все мужчины по очереди трахают её сзади пальцами, остальные женщины держат за волосы и трахают рот.",
    "Мужчина сидит. Все женщины по очереди садятся на его лицо и на член по 25 секунд каждая, чередуя.",
    "Женщина лежит на спине. Все мужчины по очереди трахают её киску и попу пальцами, остальные женщины лижут ей грудь и делают facefuck.",
    "Мужчина лежит в центре. Все женщины по очереди скачут на его лице и члене в разных позах по 20–30 секунд каждая.",
    "Одна женщина раком в центре. Все мужчины по очереди трахают сзади, остальные женщины лижут ей клитор или грудь.",
    "Мужчина стоит. Все женщины по очереди сосут член и лижут яйца по 25 секунд каждая, остальные лижут попу.",
    "Женщина на спине, ноги за голову. Все мужчины по очереди трахают глубоко, остальные женщины лижут клитор и грудь.",
    "Мужчина лежит. Все женщины по очереди делают facesitting и скачут на члене по 25 секунд.",
    "Две женщины в позе 69. Все мужчины по очереди трахают каждую сзади по 20–25 секунд.",
    "Одна женщина стоит раком у стены. Все мужчины трахают сзади по очереди, остальные женщины делают facefuck спереди."
        ],
        trio: [
           "Мужчина ложится на спину. Одна женщина садится ему на лицо (киской к лицу), вторая женщина активно сосёт его член или трахает рукой 90 секунд. Потом женщины меняются местами.",
    "Женщина становится раком. Мужчина трахает её пальцами в киску сзади жёстко и быстро, вторая женщина держит первую за волосы и трахает ей рот пальцами глубоко 100 секунд.",
    "Мужчина лежит на спине. Одна женщина скачет на его лице (facesitting), вторая женщина скачет на его члене или руке в позе наездницы очень активно 95 секунд.",
    "Женщина лежит на спине, ноги широко раздвинуты. Мужчина трахает её пальцами в киску глубоко и ритмично, вторая женщина лижет ей грудь и сильно сосёт соски 90 секунд.",
    "Мужчина стоит на коленях. Одна женщина садится ему на лицо и двигается бёдрами, вторая женщина стоит перед ним — он лижет одну и трахает пальцами вторую 100 секунд.",
    "Две женщины ложатся в позе 69 друг на друге. Мужчина подходит сзади и по очереди трахает каждую из них пальцами в киску или попу жёстко 95 секунд.",
    "Мужчина лежит на спине. Одна женщина сидит на его лице и активно двигается, вторая женщина трахает его член рукой или скачет на нём 90 секунд.",
    "Женщина стоит раком. Мужчина трахает её сзади тремя пальцами быстро, вторая женщина стоит спереди и делает ей глубокий facefuck пальцами 100 секунд.",
    "Мужчина сидит на стуле. Одна женщина садится ему на колени лицом к нему и трахается на его руке, вторая женщина стоит сзади и лижет ему шею / грудь 95 секунд.",
    "Женщина ложится на спину, ноги закинуты за голову. Мужчина трахает её киску пальцами жёстко, вторая женщина лижет ей попу и вводит туда один палец 90 секунд.",
    "Мужчина лежит на боку. Одна женщина ложится перед ним в ложках — он трахает её сзади, вторая женщина ложится спереди и лижет ей клитор 100 секунд.",
    "Две женщины стоят на четвереньках рядом. Мужчина по очереди трахает каждую из них пальцами сзади очень быстро, чередуя каждые 20–25 секунд 95 секунд всего.",
    "Мужчина стоит. Одна женщина на коленях сосёт ему член, вторая женщина стоит рядом и лижет ему грудь или шею 90 секунд.",
    "Женщина лежит на столе на спине. Мужчина трахает её киску стоя жёстко, вторая женщина стоит у головы и трахает ей рот пальцами 100 секунд.",
    "Мужчина лежит на спине. Одна женщина делает ему facesitting и дрочит себя, вторая женщина сидит на его члене в обратной наезднице 95 секунд.",
    "Две женщины ложатся на спину рядом, ноги раздвинуты. Мужчина по очереди трахает каждую тремя пальцами глубоко и быстро 20–25 секунд на каждую 90 секунд всего.",
    "Женщина сидит на лице мужчины (facesitting). Вторая женщина трахает первую в киску пальцами жёстко и ритмично 100 секунд.",
    "Мужчина лежит на спине. Одна женщина скачет на его лице, вторая женщина трахает его член рукой или скачет на нём быстро 90 секунд.",
    "Две женщины становятся раком друг за другом. Мужчина трахает первую сзади пальцами, первая женщина трахает вторую пальцами — цепочка 95 секунд.",
    "Мужчина сидит на краю кровати. Одна женщина садится на его лицо, вторая женщина скачет на его члене или руке в позе наездницы 100 секунд.",
    "Женщина лежит на боку. Мужчина трахает её спереди в киску медленно и глубоко, вторая женщина лижет ей клитор или грудь 90 секунд.",
    "Мужчина стоит. Одна женщина на коленях перед ним сосёт член, вторая женщина стоит сзади и лижет ему попу или шлёпает 95 секунд.",
    "Женщина на четвереньках. Мужчина трахает её киску пальцами сзади, вторая женщина держит её за волосы и трахает рот 90 секунд.",
    "Мужчина лежит на спине, ноги подняты. Одна женщина лижет и трахает ему попу пальцами, вторая женщина сидит на его лице 100 секунд.",
    "Две женщины сидят лицом друг к другу в позе ножницы. Мужчина подходит и по очереди трахает каждую пальцами в киску быстро 95 секунд всего.",
    "Женщина лежит на спине, ноги широко. Мужчина трахает её киску жёстко, вторая женщина лижет ей грудь и сильно щиплет соски 90 секунд.",
    "Мужчина сидит. Одна женщина садится на его лицо спиной к нему, вторая женщина садится на его член лицом к нему и скачет 100 секунд.",
    "Женщина стоит раком у стены. Мужчина трахает её сзади пальцами, вторая женщина стоит спереди и делает ей facefuck 95 секунд.",
    "Мужчина лежит на спине. Одна женщина делает с ним 69 (она сверху), вторая женщина трахает её пальцами сзади 90 секунд.",
    "Две женщины ложатся в позе 69. Мужчина подходит сзади и по очереди трахает каждую в киску пальцами 100 секунд.",
    "Мужчина стоит на коленях. Одна женщина садится ему на лицо и двигается, вторая женщина стоит перед ним — он лижет одну и трахает пальцами вторую 95 секунд.",
    "Женщина на спине, ноги за голову. Мужчина трахает её киску глубоко, вторая женщина лижет ей попу и вводит палец 90 секунд.",
    "Мужчина лежит. Одна женщина скачет на его лице, вторая женщина трахает его член рукой или скачет на нём в позе обратной наездницы очень быстро 100 секунд.",
    "Женщина лежит на спине. Мужчина трахает её пальцами в миссионерской позе жёстко, вторая женщина сидит на её лице и двигается 95 секунд.",
    "Мужчина стоит. Одна женщина на коленях сосёт ему член, вторая женщина лижет ему яйца и вводит палец в попу 90 секунд."
        ]
    };

    // --- ЛОГИКА ИНТЕРФЕЙСА ---

    // Фоновые сердца
    function initHearts() {
        const container = document.getElementById('bgHearts');
        for(let i=0; i<15; i++) {
            createHeart(container);
        }
    }

    function createHeart(container) {
        const heart = document.createElement('div');
        heart.classList.add('heart-bg');
        heart.innerHTML = '❤️';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
        heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
        heart.style.animationDelay = (Math.random() * 5) + 's';
        container.appendChild(heart);
    }

    initHearts();

    // Переходы
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // ВХОД
    function checkPassword() {
        const inp = document.getElementById('passwordInput');
        if (inp.value === '7777') {
            showScreen('screen-count');
        } else {
            inp.classList.add('error');
            setTimeout(() => inp.classList.remove('error'), 300);
            inp.value = '';
        }
    }

    // ВЫБОР КОЛИЧЕСТВА
    function selectCount(n) {
        gameState.playerCount = n;
        document.querySelectorAll('#screen-count .heart-btn').forEach(b => b.classList.remove('selected'));
        event.target.classList.add('selected');
    }

    function goToNames() {
        const container = document.getElementById('namesContainer');
        container.innerHTML = '';
        for(let i=0; i<gameState.playerCount; i++) {
            container.innerHTML += `
                <div class="player-setup-row">
                    <input type="text" placeholder="Имя игрока ${i+1}" class="name-input" data-id="${i}">
                    <div class="gender-switch">
                        <button class="gender-btn active" onclick="setGender(this, ${i}, 'M')">М</button>
                        <button class="gender-btn" onclick="setGender(this, ${i}, 'F')">Ж</button>
                    </div>
                </div>
            `;
        }
        // Инициализация структуры игроков
        gameState.players = Array(gameState.playerCount).fill().map((_, i) => ({
            name: '', gender: 'M', score: 0, id: i
        }));
        showScreen('screen-names');
    }

    function setGender(btn, index, gender) {
        const parent = btn.parentElement;
        parent.querySelectorAll('.gender-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        gameState.players[index].gender = gender;
    }

    function goToScore() {
        const inputs = document.querySelectorAll('.name-input');
        let allFilled = true;
        inputs.forEach((inp, i) => {
            if(!inp.value.trim()) allFilled = false;
            gameState.players[i].name = inp.value.trim() || `Игрок ${i+1}`;
        });
        showScreen('screen-score');
    }

    // НАСТРОЙКА ОЧКОВ
    function setScoreLimit(n) {
        gameState.scoreLimit = n;
        document.querySelectorAll('#screen-score .heart-btn').forEach(b => b.classList.remove('selected'));
        if(event) event.target.classList.add('selected');
        document.getElementById('customScore').value = '';
    }

    // СТАРТ ИГРЫ
    function startGame() {
        const custom = document.getElementById('customScore').value;
        if(custom) gameState.scoreLimit = parseInt(custom);
        
        renderGameBoard();
        showScreen('screen-game');
    }

    function renderGameBoard() {
        const board = document.getElementById('gameBoard');
        // Очистка кроме кнопки спина
        const spinBtn = board.querySelector('.spin-btn');
        board.innerHTML = '';
        board.appendChild(spinBtn);

        const radius = 130; // Радиус круга
        const angleStep = 360 / gameState.players.length;

        gameState.players.forEach((player, index) => {
            const angle = angleStep * index - 90; // -90 чтобы начать сверху
            const rad = angle * (Math.PI / 180);
            const x = 175 + radius * Math.cos(rad); // 175 - центр
            const y = 175 + radius * Math.sin(rad);

            const node = document.createElement('div');
            node.className = 'player-node';
            node.id = `player-node-${index}`;
            node.style.left = x + 'px';
            node.style.top = y + 'px';
            
            node.innerHTML = `
                <div class="bulb" id="bulb-${index}"></div>
                <div class="player-name">${player.name}</div>
                <div class="player-score" id="score-${index}">0</div>
            `;
            board.appendChild(node);
        });
    }

    // --- ИГРОВАЯ МЕХАНИКА ---

    function spinWheel() {
        if(gameState.isSpinning) return;
        gameState.isSpinning = true;

        // Эффект вращения (лампочки)
        let speed = 50;
        let counter = 0;
        let currentLit = 0;
        const totalSpins = 20 + Math.floor(Math.random() * 10);
        
        const loop = () => {
            // Гасим все
            document.querySelectorAll('.bulb').forEach(b => b.classList.remove('lit'));
            // Зажигаем следующую
            document.getElementById(`bulb-${currentLit}`).classList.add('lit');
            
            currentLit = (currentLit + 1) % gameState.players.length;
            counter++;

            if(counter < totalSpins) {
                // Замедление
                if(counter > totalSpins - 10) speed += 30;
                setTimeout(loop, speed);
            } else {
                finishSpin();
            }
        };
        loop();
    }

    function finishSpin() {
        gameState.isSpinning = false;
        
        // Рандомный выбор участников (1, 2, 3 или все)
        const countRand = Math.random();
        let pickCount = 1;
        
        // Веса вероятностей
        if(gameState.playerCount === 2) {
            pickCount = countRand > 0.6 ? 2 : 1;
        } else {
            if(countRand > 0.85) pickCount = gameState.playerCount; // Все
            else if(countRand > 0.6) pickCount = 2;
            else pickCount = 1;
        }

        // Выбираем уникальных игроков
        let indices = [];
        while(indices.length < pickCount) {
            let r = Math.floor(Math.random() * gameState.players.length);
            if(!indices.includes(r)) indices.push(r);
        }

        // Подсвечиваем победителей раунда
        document.querySelectorAll('.bulb').forEach(b => b.classList.remove('lit'));
        indices.forEach(idx => {
            document.getElementById(`bulb-${idx}`).classList.add('lit');
        });

        generateTask(indices);
    }

    function generateTask(indices) {
        gameState.currentTaskPlayers = indices;
        
        // Определяем тип задания
        let type = 'solo';
        let text = '';
        
        const playersObj = indices.map(i => gameState.players[i]);
        const namesStr = playersObj.map(p => p.name).join(' + ');

        if(indices.length === 1) {
            type = 'solo';
            text = TASKS.solo[Math.floor(Math.random() * TASKS.solo.length)];
        } else if(indices.length === 2) {
            type = 'duo';
            text = TASKS.duo[Math.floor(Math.random() * TASKS.duo.length)];
        } else if(indices.length === gameState.players.length && gameState.players.length > 2) {
            type = 'group';
            text = TASKS.group[Math.floor(Math.random() * TASKS.group.length)];
        } else {
            type = 'trio';
            // Специфика для троих (индивидуализация)
            if(Math.random() > 0.5) {
                text = TASKS.trio[Math.floor(Math.random() * TASKS.trio.length)];
            } else {
                // Генерируем составное
                text = `${playersObj[0].name}: Сделай массаж ${playersObj[1].name}.<br>
                        ${playersObj[1].name}: Расскажи анекдот.<br>
                        ${playersObj[2].name}: Оцени массаж.`;
            }
        }

        // Показ модалки
        setTimeout(() => {
            document.getElementById('taskTarget').innerText = namesStr;
            document.getElementById('taskContent').innerHTML = text;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('taskCard').classList.add('show');
        }, 500);
    }

    function completeTask(success) {
        const delta = success ? 1 : -1;
        
        // Обновляем очки
        gameState.currentTaskPlayers.forEach(idx => {
            let p = gameState.players[idx];
            p.score = Math.max(0, p.score + delta); // Не уходим в минус
            
            // Анимация изменения счета
            const scoreEl = document.getElementById(`score-${idx}`);
            scoreEl.innerText = p.score;
            scoreEl.style.transform = "scale(1.5)";
            scoreEl.style.color = success ? "#0f0" : "#f00";
            setTimeout(() => {
                scoreEl.style.transform = "scale(1)";
                scoreEl.style.color = "var(--primary)";
            }, 500);
        });

        closeTask();
        checkVictory();
    }

    function closeTask() {
        document.getElementById('taskCard').classList.remove('show');
        document.getElementById('overlay').style.display = 'none';
        document.querySelectorAll('.bulb').forEach(b => b.classList.remove('lit'));
    }

    function checkVictory() {
        const winner = gameState.players.find(p => p.score >= gameState.scoreLimit);
        
        if(winner) {
            setTimeout(() => {
                showScreen('screen-win');
                document.getElementById('winnerName').innerText = winner.name;
                spawnConfetti();
                document.getElementById('audioWin').play().catch(e=>{}); // Автоплей может быть заблочен
            }, 800);
        }
    }

    // ЭФФЕКТЫ ПОБЕДЫ
    function spawnConfetti() {
        const colors = ['#ffd700', '#ff004c', '#fff'];
        for(let i=0; i<100; i++) {
            const c = document.createElement('div');
            c.className = 'confetti';
            c.style.left = Math.random() * 100 + 'vw';
            c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            c.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(c);
        }
    }

    function resetGame() {
        location.reload();
    }

</script>
</body>
</html>
